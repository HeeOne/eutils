!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).$eutils={})}(this,(function(e){"use strict";const t=Object.prototype.toString;function r(e){return"Undefined"==function(e){return t.call(e).slice(8,-1)}(e)}function n(e,t=2){let r=Number(e);return isNaN(r)?NaN:((0===(t=parseInt(String(t)))||t)&&(r=+r.toFixed(t)),r)}function o(e,t="{y}-{m}-{d} {h}:{i}:{s}"){if(0===arguments.length||!e)return null;let r;"object"==typeof e?r=e:("string"==typeof e&&(e=/^[0-9]+$/.test(e)?parseInt(e):e.replace(new RegExp(/-/gm),"/")),"number"==typeof e&&10===e.toString().length&&(e*=1e3),r=new Date(e));const n={y:r.getFullYear(),m:r.getMonth()+1,d:r.getDate(),h:r.getHours(),i:r.getMinutes(),s:r.getSeconds(),a:r.getDay()};return t.replace(/{([ymdhisa])+}/g,((e,t)=>{const r=n[t];return"a"===t?["日","一","二","三","四","五","六"][r]:r.toString().padStart(2,"0")}))}e.StorageClient=class{constructor({prefix:e="",storageType:t="local"}={}){this.prefix=e,this.storage="local"===t?localStorage:sessionStorage}getKey(e){return`${this.prefix}-${e}`}setItem(e,t,r){const n=this.getKey(e),o={value:t,expired:r?Date.now()+r:void 0};this.storage.setItem(n,JSON.stringify(o))}getItem(e,t){const r=this.getKey(e),n=this.storage.getItem(r);if(!n)return t;try{const e=JSON.parse(n);return e.expired&&Date.now()>e.expired?(this.storage.removeItem(r),t):e.value}catch(e){return console.error(`Storage parse error [${r}]:`,e),this.storage.removeItem(r),t}}removeItem(e){const t=this.getKey(e);this.storage.removeItem(t)}clear(){const e=[];for(let t=0;t<this.storage.length;t++){const r=this.storage.key(t);r&&r.startsWith(this.prefix)&&e.push(r)}e.forEach((e=>this.storage.removeItem(e)))}},e.formatNumberThousands=function(e,t=void 0){let o=e;if(function(e){return!r(e)}(t)&&(o=n(e,t),isNaN(o)))return NaN;let s=o.toString().split(".");return s[0]=s[0].replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),s.join(".")},e.formatNumberToPrecise=n,e.generateDatefrom=function(e,t=90){const r=e?new Date(e).getTime():(new Date).getTime();return new Date(r-864e5*t)},e.getPercentWithPrecision=function(e,t=2){if(Array.isArray(e)){for(var r=[],n=Math.pow(10,t),o=100*n,s=0,i=0;i<e.length;i++)s+=isNaN(e[i])?0:e[i];var a=[];for(i=0;i<e.length;i++)a.push(e[i]/s*n*100);var u=[],g=[],c=0;for(i=0;i<a.length;i++){var l=Math.floor(a[i]);u.push(l),g.push(a[i]-l),c+=l}for(;c<o;){var f=Number.MIN_SAFE_INTEGER,h=null;for(i=0;i<g.length;i++)g[i]>f&&(f=g[i],h=i);g[h]=0,++c,++u[h]}for(i=0;i<u.length;i++)r.push(u[i]/n);return r}},e.listMonths=function(e,t){const r=o(e,"{y}-{m}"),n=o(t,"{y}-{m}");if(!r||!n)return[];const s=e=>{const[t,r]=e.split("-").map(Number);return new Date(t,r-1,1)};let i=s(r),a=s(n);i>a&&([i,a]=[a,i]);const u=[],g=new Date(i);for(;g<=a;){const e=g.getFullYear(),t=(g.getMonth()+1).toString().padStart(2,"0");u.push(`${e}-${t}`),g.setMonth(g.getMonth()+1)}return u},e.parseTime=o}));
